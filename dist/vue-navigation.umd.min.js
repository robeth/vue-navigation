/**
* vue-navigation v1.1.4
* https://github.com/zack24q/vue-navigation
* Released under the MIT License.
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.VueNavigation=t()}(this,function(){"use strict";var e=[];window.sessionStorage.VUE_NAVIGATION&&(e=JSON.parse(window.sessionStorage.VUE_NAVIGATION));var w=e;function x(e,t){return(e.name||e.path)+"?"+e.query[t]}var h=function(N,A,E,I){A&&A.registerModule(E,{state:{routes:w},mutations:{"navigation/FORWARD":function(e,t){t.to,t.from;var n=t.name;e.routes.push(n)},"navigation/BACK":function(e,t){t.to,t.from;var n=t.count;e.routes.splice(e.routes.length-n,n)},"navigation/REPLACE":function(e,t){t.to,t.from;var n=t.name;e.routes.splice(w.length-1,1,n)},"navigation/REFRESH":function(e,t){t.to,t.from},"navigation/RESET":function(e){e.routes.splice(0,e.routes.length)}}});return{record:function(e,t,n){var o,r,a,i,c,s,u,f,l,m,h,g,v,p,d,y=x(e,I);if(n)g=y,v={route:e},p={route:t},d=A?A.state[E].routes:w,p.name=d[d.length-1]||null,v.name=g,A?A.commit("navigation/REPLACE",{to:v,from:p,name:g}):d.splice(w.length-1,1,g),window.sessionStorage.VUE_NAVIGATION=JSON.stringify(d),N.$emit("replace",v,p);else{var O=w.lastIndexOf(y);-1===O?(f=y,l={route:e},m={route:t},h=A?A.state[E].routes:w,m.name=h[h.length-1]||null,l.name=f,A?A.commit("navigation/FORWARD",{to:l,from:m,name:f}):h.push(f),window.sessionStorage.VUE_NAVIGATION=JSON.stringify(h),N.$emit("forward",l,m)):O===w.length-1?(c={route:e},s={route:t},u=A?A.state[E].routes:w,c.name=s.name=u[u.length-1],A&&A.commit("navigation/REFRESH",{to:c,from:s}),N.$emit("refresh",c,s)):(o=w.length-1-O,r={route:e},a={route:t},i=A?A.state[E].routes:w,a.name=i[i.length-1],r.name=i[i.length-1-o],A?A.commit("navigation/BACK",{to:r,from:a,count:o}):i.splice(w.length-o,o),window.sessionStorage.VUE_NAVIGATION=JSON.stringify(i),N.$emit("back",r,a))}},reset:function(){A?A.commit("navigation/RESET"):w.splice(0,w.length),window.sessionStorage.VUE_NAVIGATION=JSON.stringify([]),N.$emit("reset")}}},g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}return{install:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.router,o=t.store,r=t.moduleName,a=void 0===r?"navigation":r,i=t.keyName,c=void 0===i?"VNK":i;if(n){var s,u=new e,f=h(u,o,a,c),l=n.replace.bind(n),m=!1;n.replace=function(e,t,n){m=!0,l(e,t,n)},n.beforeEach(function(e,t,n){if(e.query[c])n();else{var o=g({},e.query);e.path===t.path&&function(e,t){if(e===t)return!0;var n=Object.getOwnPropertyNames(e),o=Object.getOwnPropertyNames(t);if(n.length!==o.length)return!1;var r=!0,a=!1,i=void 0;try{for(var c,s=n[Symbol.iterator]();!(r=(c=s.next()).done);r=!0){var u=c.value;if(e[u]!==t[u])return!1}}catch(e){a=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw i}}return!0}(g({},e.query,v({},c,null)),g({},t.query,v({},c,null)))&&t.query[c]?o[c]=t.query[c]:o[c]="xxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),n({name:e.name,params:e.params,query:o,replace:m||!t.query[c]})}}),n.afterEach(function(e,t){f.record(e,t,m),m=!1}),e.component("navigation",(s=c,{name:"navigation",abstract:!0,props:{},data:function(){return{routes:w}},computed:{},watch:{routes:function(e){for(var t in this.cache)if(o=e,r=t,!(Array.isArray(o)?-1<o.indexOf(r):"string"==typeof o?-1<o.split(",").indexOf(r):isRegExp(o)&&o.test(r))){var n=this.cache[t];n&&n.componentInstance.$destroy(),delete this.cache[t]}var o,r}},created:function(){this.cache={}},destroyed:function(){for(var e in this.cache){var t=this.cache[e];t&&t.componentInstance.$destroy()}},render:function(){var e=this.$slots.default?this.$slots.default[0]:null;if(e){e.key=e.key||(e.isComment?"comment":e.tag);var t=x(this.$route,s);-1===e.key.indexOf(t)&&(e.key="__navigation-"+t+"-"+e.key),this.cache[t]?e.key===this.cache[t].key?e.componentInstance=this.cache[t].componentInstance:(this.cache[t].componentInstance.$destroy(),this.cache[t]=e):this.cache[t]=e,e.componentInstance&&e.componentInstance.activated&&e.componentInstance.activated(),e.data.keepAlive=!0}return e}})),e.navigation=e.prototype.$navigation={on:function(e,t){u.$on(e,t)},once:function(e,t){u.$once(e,t)},off:function(e,t){u.$off(e,t)},getRoutes:function(){return w.slice()},cleanRoutes:function(){return f.reset()}}}else console.error("vue-navigation need options: router")}}});